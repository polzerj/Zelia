\hthree{Die "App"-Klasse}\label{sec:app}

Die "App"-Klasse übernimmt die Verwaltung aller Endpunkte, und damit das Routing zu den verfügbaren Pfaden der URL.
Das bedeutet, dass hier alle Pfade definiert werden müssen. 
Ein Pfad wird dabei durch eine sogenannte "Controller" Klasse abgebildet (siehe Kapitel "Controller" \ref{sec:controller}, Seite \pageref{sec:controller}). 
Wenn ein Request an die API gestellt wird, wird mit Hilfe des NPM-Moduls "express" die passende "Handler"-Methode des jeweiligen "Controllers" aufgerufen. 
Diese Methode bearbeitet die Anfrage und sendet eine Antwort zurück.

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{media/APITemplate/apiArchitecture.svg.pdf}
    \caption{UML Diagramm der API-Architektur}
    \label{fig:apiUML}
\end{figure}

\pagebreak

\hfour{Der "App"-Konstruktor}\label{sec:appConstructor}

Im Konstruktor der App-Klasse können verschiedene Optionen mitgegeben werden:

\hfive{"Port"}

Durch die Port-Option kann angegeben werden, auf welchem Port die API HTTP-Requests annehmen soll. Standardmäßig ist dies auf die Umgebungsvariable "PORT" gesetzt. Die Umgebungsvariablen werden aus einer ".env"-Datei ausgelesen (siehe Seite \pageref{par:dockerEnvFile}). Falls diese nicht gesetzt ist, wird der Port 3000 verwendet.

\hfive{"Controllers"}

Die "Controller" werden als Array von "Controller"-Objekten übergeben und repräsentieren einen Endpunkt (siehe Kapitel "Controllers" \ref{sec:controller}, Seite \pageref{sec:controller}).

\hfive{"Middlewares"}

Dies ist ein Array an "Middlewares", welche bei jedem Request vor den "Controllern" ausgeführt werden (siehe Kapitel "Middleware" \ref{sec:middleware}, Seite \pageref{sec:middleware}).

\hfive{"Base-URL"}

Durch diesen String kann der Root-Pfad definiert werden. Standardmäßig ist dieser auf "{\ttfamily /}" gesetzt. Bei \ZELIA\ ist dieser auf "{\ttfamily /api}" konfiguriert worden, da alle API bezogenen Anfragen auf den Pfad "{\ttfamily /api}" gehen.

\hfour{Verwendung der APP-Klasse}\label{sec:appUsage}

Um eine Instanz der App-Klasse zu erstellen, muss diese importiert werden. Danach kann die "App" mit ihren registrierten "Controllern" und "Middlewares" instanziiert werden. Damit die "App" auf dem angegebenen Port gestartet wird, muss die "listen"-Methode aufgerufen werden.

\typescript{code/APITemplate/appusage.ts}{Verwendung der App-Klasse}