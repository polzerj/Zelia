\hthree{Implementierung}

Da die Token-basierende Authentifizierungsmethode einige Vorteile bezüglich des "Load-Balancing" hat, wurde das JWT verwendet, um die Sitzung des Benutzers zu identifizieren.

\hfour{Aufbau der Sitzung}


Beim Anmelden werden die Benutzerdaten vom Client, mit den im "Body" des "HTTP-Requests" angegebenen Benutzerkenndaten, von der Datenbank abgefragt. 
Daraufhin wird das Token mit den Benutzerinformationen erstellt, signiert und an den Client zurückgesendet. 
Wenn die Benutzerkenndaten nicht mit den Daten aus der Datenbank übereinstimmen, wird ein Fehler mit dem HTTP Status-Code 401 (Unauthorized) zurückgegeben (siehe Code \ref{code:LoginController}).

\typescript[code:LoginController]{code/Authentication/LoginController.ts}{Implementierung des Login-Controllers}

\pagebreak
\hfour{Validierung der Sitzung}

Zum Validieren der Sitzung wird eine Middleware (siehe Kapitel \ref{sec:middleware}, S. \pageref{sec:middleware}) verwendet, welche das JWT auf dessen Gültigkeit überprüft. 
Wenn das Token gültig ist, wird die "next"-Funktion aufgerufen und der "Controller" wird ausgeführt. Der "Controller" sendet dann die angefragten Daten an den Client zurück. 
Wenn das Token nicht gültig ist, wird der HTTP Status-Code 401 ("Unauthorized") zurückgegeben und die Weiterverarbeitung der Anfrage durch weitere "Middlewares" oder dem "Controller" blockiert.

\typescript{code/Authentication/AuthMiddleware.ts}{Validierung der Sitzung}
